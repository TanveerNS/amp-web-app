(self.AMP=self.AMP||[]).push({n:"amp-bind",v:"2002251816300",f:(function(AMP,_){
var l,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={a:!0},ea={};try{ea.__proto__=da;ca=ea.a;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function ha(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ia=b.prototype}function ia(a){for(var b=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return globalThis}var ja=ia(this);function ka(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var la=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function q(a){var b=Object.create(null);if(!a)return b;for(var c;c=la.exec(a);){var d=ka(c[1],c[1]),e=c[2]?ka(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var ma="";
function t(){var a,b=a||self;if(b.__AMP_MODE)var c=b.__AMP_MODE;else{c=b;var d=self.AMP_CONFIG||{},e=!!d.test||!1,f=q(c.location.originalHash||c.location.hash),g=d.spt;d=d.esm;var h=q(c.location.search);ma||(ma=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"012002251816300");c={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(f.development)||c.AMP_DEV_MODE),examiner:"2"==f.development,esm:d,geoOverride:f["amp-geo"],minified:!0,lite:void 0!=h.amp_lite,test:e,log:f.log,
version:"2002251816300",rtvVersion:ma,singlePassType:g};c=b.__AMP_MODE=c}return c};var na=Object.prototype.toString;function u(a){return a?Array.prototype.slice.call(a):[]}function v(a){return"[object Object]"===na.call(a)};var w=self.AMP_CONFIG||{},x={thirdParty:w.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:w.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof w.thirdPartyFrameRegex?new RegExp(w.thirdPartyFrameRegex):w.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:w.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:w.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:w.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/]};function oa(a){var b=Object.getOwnPropertyDescriptor(a,"message");if(b&&b.writable)return a;var c=a.stack,d=Error(a.message),e;for(e in a)d[e]=a[e];d.stack=c;return d}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function A(){if(!y.user)throw Error("failed to call initLogConstructor");return y.user}function B(){if(y.dev)return y.dev;throw Error("failed to call initLogConstructor");}
function C(a,b,c,d,e){return A().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};var D=Object.prototype.hasOwnProperty;function E(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function F(a){return a||{}}function I(a,b){if(D.call(a,b))return a[b]}
function pa(a,b){var c=10;c=void 0===c?10:c;var d=[],e=[];e.push({t:a,s:b,d:0});for(a={};0<e.length;){b=e.shift();a.F=b.t;a.B=b.s;a.N=b.d;if(d.includes(a.B))throw Error("Source object has a circular reference.");d.push(a.B);a.F!==a.B&&(a.N>c?Object.assign(a.F,a.B):Object.keys(a.B).forEach(function(a){return function(b){var c=a.B[b];if(D.call(a.F,b)){var d=a.F[b];if(v(c)&&v(d)){e.push({t:d,s:c,d:a.N+1});return}}a.F[b]=c}}(a)));a={B:a.B,F:a.F,N:a.N}}};function J(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var qa,ra="Webkit webkit Moz moz ms O o".split(" ");function sa(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};function ta(){return AMP.BaseElement.apply(this,arguments)||this}ha(ta,AMP.BaseElement);l=ta.prototype;l.getLayoutPriority=function(){return 1};l.isAlwaysFixed=function(){return!0};l.isLayoutSupported=function(){return!0};l.renderOutsideViewport=function(){return!0};l.P=function(){return"<amp-bind-macro> "+(this.element.getAttribute("id")||"<unknown id>")};function ua(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function va(){var a=100;this.ta=a;this.W=this.$=0;this.O=Object.create(null)}va.prototype.has=function(a){return!!this.O[a]};va.prototype.get=function(a){var b=this.O[a];if(b)return b.access=++this.W,b.payload};va.prototype.put=function(a,b){this.has(a)||this.$++;this.O[a]={payload:b,access:this.W};if(!(this.$<=this.ta)){B().warn("lru-cache","Trimming LRU cache");a=this.O;var c=this.W+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.$--)}};var wa=F({c:!0,v:!0,a:!0,ad:!0,action:!0}),xa,ya,za=/[?&]amp_js[^&]*/,Aa=/[?&]amp_gsa[^&]*/,Ba=/[?&]amp_r[^&]*/,Ca=/[?&]amp_kit[^&]*/,Da=/[?&]usqp[^&]*/;
function K(a){var b;xa||(xa=self.document.createElement("a"),ya=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new va));var c=b?null:ya,d=xa;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=
e.hostname;e.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c&&c.put(a,e);a=e}return a}
function Ea(a,b){var c=void 0===c?"source":c;C(null!=a,"%s %s must be available",b,c);var d=a;a=d;"string"==typeof a&&(a=K(a));var e;(e="https:"==a.protocol||"localhost"==a.hostname||"127.0.0.1"==a.hostname)||(a=a.hostname,e=a.length-10,e=0<=e&&a.indexOf(".localhost",e)==e);C(e||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d)}
function L(a){"string"==typeof a&&(a=K(a));return x.cdnProxyRegex.test(a.origin)}
function Fa(a){"string"==typeof a&&(a=K(a));if(!L(a))return a.href;var b=a.pathname.split("/");C(wa[b[1]],"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);C(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(za,"").replace(Aa,"").replace(Ba,"").replace(Ca,"").replace(Da,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}
function Ga(a,b){"string"==typeof b&&(b=K(b));if("function"==typeof URL)var c=(new URL(a,b.href)).toString();else{c=a;var d=b;"string"==typeof d&&(d=K(d));c=c.replace(/\\/g,"/");var e=K(c);c=J(c.toLowerCase(),e.protocol)?e.href:J(c,"//")?d.protocol+c:J(c,"/")?d.origin+c:d.origin+d.pathname.replace(/\/[^/]*$/,"/")+c}return c}function Ha(a){var b=K(a),c=q(b.search);C(!("__amp_source_origin"in c),"Source origin is not allowed in %s",a)};function Ka(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=
e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0)}Object.assign(c,La(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(d=a.AMP_CONFIG["allow-url-opt-in"],a=q(a.location.originalHash||a.location.hash),e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}var g=c;return!!g[b]}
function La(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){B().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var Ma={},M=(Ma["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},Ma);
function Na(a){if(!Ka(a,"ampdoc-fie"))return!1;a.__AMP_EXPERIMENT_BRANCHES=a.__AMP_EXPERIMENT_BRANCHES||{};for(var b in M)if(D.call(M,b)&&!D.call(a.__AMP_EXPERIMENT_BRANCHES,b))if(!M[b].isTrafficEligible||!M[b].isTrafficEligible(a))a.__AMP_EXPERIMENT_BRANCHES[b]=null;else if(!a.__AMP_EXPERIMENT_BRANCHES[b]&&Ka(a,b)){var c=M[b].branches;a.__AMP_EXPERIMENT_BRANCHES[b]=c[Math.floor(Math.random()*c.length)]||null}return"21065002"===(a.__AMP_EXPERIMENT_BRANCHES?a.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:
null)};function Oa(a,b){var c=a.ownerDocument.defaultView,d=N(c),e=c!=d,f=Na(d);e&&!f?b=Pa(c,b)?O(c,b):null:(a=P(a),a=Q(a),b=Pa(a,b)?O(a,b):null);return b}function Qa(a,b){var c=N(a);Pa(a,"bind");if(Na(c)){var d=P(a.document);Ra(Q(d),d,"bind",function(){return b},!0)}else Ra(a,a,"bind",function(){return b}),O(a,"bind")}function R(a,b){a=N(a);return O(a,b)}function S(a,b){var c=P(a);c=Q(c);return O(c,b)}function Sa(a,b){return Ta(Q(a),b)}function N(a){return a.__AMP_TOP||(a.__AMP_TOP=a)}
function P(a){return a.nodeType?R((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Q(a){a=P(a);return a.isSingleDoc()?a.win:a}function O(a,b){Pa(a,b);var c=Ua(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ra(a,b,c,d,e){var f=Ua(a),g=f[c];g||(g=f[c]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});if(e||!g.ctor&&!g.obj)g.ctor=d,g.context=b,g.resolve&&O(a,c)}
function Va(a,b){var c=Ta(a,b);if(c)return c;a=Ua(a);a[b]=Wa();return a[b].promise}function Ta(a,b){var c=Ua(a)[b];if(c){if(c.promise)return c.promise;O(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ua(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Pa(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
function Wa(){var a=new ua,b=a,c=b.promise,d=b.resolve;b=b.reject;c.catch(function(){});return{obj:null,promise:c,resolve:d,reject:b,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function Xa(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}}function Ya(a,b){Xa(a.documentElement,function(){return!!a.body},b)}function Za(a){return new Promise(function(b){return Ya(a,b)})}function $a(a,b){for(var c;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}
function ab(a,b){return a.closest?a.closest(b):$a(a,function(a){var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return c?c.call(a,b):!1})}function bb(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)}function cb(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()}
function db(a){J(a.tagName,"AMP-");if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){var b=new ua;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM};function eb(a,b,c){var d=Sa(a,b);if(d)return d;var e=P(a);return e.waitForBodyOpen().then(function(){return fb(e.win,c,e.win.document.head)}).then(function(){var d=e.win;return d.__AMP_EXTENDED_ELEMENTS&&d.__AMP_EXTENDED_ELEMENTS[c]?Va(Q(a),b):null})}function gb(a){var b=Oa(a,"bind");if(b)return Promise.resolve(b);b=a.ownerDocument.defaultView;var c=N(b);return b!==c?hb(b):eb(a,"bind","amp-bind")}
function fb(a,b,c){if(c){var d={};c=c.querySelectorAll("script[custom-element],script[custom-template]");for(var e=0;e<c.length;e++){var f=c[e];f=f.getAttribute("custom-element")||f.getAttribute("custom-template");d[f]=!0}d=Object.keys(d)}else d=[];if(!d.includes(b))return Promise.resolve();var g=R(a,"extensions");return g.waitForExtension(a,b)}
function hb(a){return Za(a.document).then(function(){return fb(a,"amp-bind",a.document.head)}).then(function(){return a.__AMP_EXTENDED_ELEMENTS&&a.__AMP_EXTENDED_ELEMENTS["amp-bind"]?Va(a,"bind"):null})};function ib(a,b){if("."==b)return a;b=b.split(".");for(var c=0;c<b.length;c++){var d=b[c];if(d&&a&&void 0!==a[d]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,d)))a=a[d];else{a=void 0;break}}return a}function jb(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}}
function kb(a,b){var c=20;c=void 0===c?5:c;if(!isFinite(c)||0>c)throw Error("Invalid depth: "+c);if(a===b)return!0;for(a=[{a:a,b:b,depth:c}];0<a.length;){var d=a.shift();b=d.a;c=d.b;d=d.depth;if(0<d){if(typeof b!==typeof c)return!1;if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return!1;for(var e=0;e<b.length;e++)a.push({a:b[e],b:c[e],depth:d-1});continue}else if(b&&c&&"object"===typeof b&&"object"===typeof c){var f=Object.keys(b),g=Object.keys(c);if(f.length!==g.length)return!1;for(e=
0;e<f.length;e++){var h=f[e];a.push({a:b[h],b:c[h],depth:d-1})}continue}}if(b!==c)return!1}return!0};function lb(a,b,c){c=void 0===c?{}:c;var d=void 0===c.expr?".":c.expr,e=void 0===c.urlReplacement?0:c.urlReplacement,f=void 0===c.refresh?!1:c.refresh,g=void 0===c.token?void 0:c.token,h=void 0===c.xssiPrefix?void 0:c.xssiPrefix;Ea(b.getAttribute("src"),b);var k=R(a.win,"batched-xhr");return mb(b,e,f).then(function(a){void 0!==g&&(a.fetchOpt.method="POST",a.fetchOpt.headers={"Content-Type":"application/x-www-form-urlencoded"},a.fetchOpt.body={ampViewerAuthToken:g});return k.fetchJson(a.xhrUrl,a.fetchOpt)}).then(function(b){return R(a.win,
"xhr").xssiJson(b,h)}).then(function(a){if(null==a)throw Error("Response is undefined.");return ib(a,d||".")}).catch(function(a){throw A().createError("failed fetching JSON data",a);})}
function mb(a,b,c){var d=a.getAttribute("src"),e=Oa(a,"url-replace");return(1<=b?e.expandUrlAsync(d):Promise.resolve(d)).then(function(d){if(1==b){var f=e.collectUnwhitelistedVarsSync(a);if(0<f.length)throw A().createError('URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="'+(f.join(" ")+'" to the <')+(a.tagName+"> element. See https://bit.ly/amp-var-subs."));}var h={};a.hasAttribute("credentials")&&(h.credentials=a.getAttribute("credentials"));
c&&(h.cache="reload");return{xhrUrl:d,fetchOpt:h}})};function nb(a,b,c,d){var e={detail:c};Object.assign(e,d);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,e);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!e.bubbles,!!e.cancelable,c);return a};function ob(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d)}function pb(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1};function qb(a){var b=a.getAttribute("crossorigin");return b&&"amp-viewer-auth-token-via-post"===b.trim()?eb(a,"amp-viewer-assistance","amp-viewer-assistance").then(function(a){C(a,'crossorigin="amp-viewer-auth-token-post" requires amp-viewer-assistance extension.');return a.getIdTokenPromise()}).then(function(a){return a||""}).catch(function(){return""}):Promise.resolve(void 0)};function rb(a){a=AMP.BaseElement.call(this,a)||this;a.R=void 0;return a}ha(rb,AMP.BaseElement);l=rb.prototype;l.getLayoutPriority=function(){return 1};l.isAlwaysFixed=function(){return!0};l.isLayoutSupported=function(){return!0};
l.buildCallback=function(){var a=this;sa(this.element);this.element.setAttribute("aria-hidden","true");var b=this.element;b.hasAttribute("overridable")&&gb(b).then(function(a){a.addOverridableKey(b.getAttribute("id"))});this.parseAndUpdate();this.element.hasAttribute("src")&&wb(this,!0);this.registerAction("refresh",function(){C(a.element.hasAttribute("src"),'Can\'t refresh <amp-state> without "src" attribute.');wb(a,!1,!0)})};
l.mutatedAttributesCallback=function(a){if(this.getAmpDoc().hasBeenVisible())void 0!==a.src&&this.element.hasAttribute("src")&&wb(this,!1);else{var b=this.P();B().error(b,"ampdoc must be visible before mutation.")}};l.renderOutsideViewport=function(){return!0};l.parseAndUpdate=function(){return void 0===this.R&&(this.R=xb(this),null!==this.R)?yb(this,this.R,!0):Promise.resolve()};
function xb(a){var b=a.element.children;if(0==b.length)return null;var c=a.P();if(1!=b.length)return a.user().error(c,"Should contain exactly one <script> child."),null;var d=b[0];return cb(d)?jb(d.textContent,function(b){a.user().error(c,"Failed to parse state. Is it valid JSON?",b)}):(a.user().error(c,'State should be in a <script> tag with type="application/json".'),null)}
function zb(a,b,c){var d=a.element,e=a.getAmpDoc(),f=d.getAttribute("src"),g=K(Fa(f)).origin!==K(Fa(e.win.location)).origin,h=g&&!b?1:2;return qb(d).then(function(b){return lb(e,a.element,{urlReplacement:h,refresh:c,token:b}).catch(function(b){b=b?nb(a.win,"amp-state.error",F({response:b.response})):null;var c=Oa(d,"action");c.trigger(d,"fetch-error",b,1)})})}function wb(a,b,c){a.getAmpDoc().whenFirstVisible().then(function(){return zb(a,b,c)}).then(function(c){return yb(a,c,b)})}
function yb(a,b,c){if(void 0===b||null===b)return Promise.resolve();var d=C(a.element.id,"<amp-state> must have an id.");return gb(a.element).then(function(a){var e=E();e[d]=b;a.setState(e,{skipEval:c,skipAmpState:!c})})}l.P=function(){return"<amp-state> "+(this.element.getAttribute("id")||"<unknown id>")};var Ab=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function Bb(a){for(var b=[],c;c=Ab.exec(a);){var d=c[1],e=void 0,f=void 0;if(c[2]){var g=c[3].toLowerCase();if("w"==g)e=parseInt(c[2],10);else if("x"==g)f=parseFloat(c[2]);else continue}else f=1;b.push({url:d,width:e,dpr:f})}return new Cb(b)}
function Cb(a){C(0<a.length,"Srcset must have at least one source");this.M=a;for(var b=!1,c=!1,d=0;d<a.length;d++){var e=a[d];b=b||!!e.width;c=c||!!e.dpr}C(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?Db:Eb);this.pa=b}
Cb.prototype.select=function(a,b){if(this.pa){b*=a;a=this.M;for(var c=0,d=Infinity,e=Infinity,f=0;f<a.length;f++){var g=a[f].width,h=Math.abs(g-b);if(h<=1.1*d||1.2<b/e)c=f,d=h,e=g;else break}b=c}else{a=this.M;c=0;d=Infinity;for(e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c}return this.M[b].url};Cb.prototype.getUrls=function(){return this.M.map(function(a){return a.url})};
Cb.prototype.stringify=function(a){for(var b=[],c=this.M,d=0;d<c.length;d++){var e=c[d],f=e.url;a&&(f=a(f));f=this.pa?f+(" "+e.width+"w"):f+(" "+e.dpr+"x");b.push(f)}return b.join(", ")};function Db(a,b){C(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function Eb(a,b){C(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr};var Fb={"class":{blacklistedValueRegex:"(^|\\W)i-amphtml-"},hidden:null,text:null},Gb={width:null,height:null},Hb={"AMP-AUDIO":{album:null,artist:null,artwork:null,controlsList:null,loop:null,src:{allowedProtocols:{https:!0}},title:null},"AMP-AUTOCOMPLETE":{src:{allowedProtocols:{https:!0}}},"AMP-BASE-CAROUSEL":{"advance-count":null,"auto-advance-count":null,"auto-advance-interval":null,"auto-advance-loops":null,"auto-advance":null,horizontal:null,"initial-index":null,loop:null,"mixed-length":null,
"side-slide-count":null,slide:null,"snap-align":null,"snap-by":null,snap:null,"visible-count":null},"AMP-BRIGHTCOVE":{"data-account":null,"data-embed":null,"data-player":null,"data-player-id":null,"data-playlist-id":null,"data-video-id":null},"AMP-CAROUSEL":{slide:null},"AMP-DATE-PICKER":{max:null,min:null,src:{allowedProtocols:{https:!0}}},"AMP-GOOGLE-DOCUMENT-EMBED":{src:null,title:null},"AMP-IFRAME":{src:null},"AMP-IMG":{alt:null,attribution:null,src:{allowedProtocols:{data:!0,http:!0,https:!0}},
srcset:{alternativeName:"src"}},"AMP-LIGHTBOX":{open:null},"AMP-LIST":{src:{allowedProtocols:{https:!0}},state:null,"is-layout-container":null},"AMP-SELECTOR":{disabled:null,selected:null},"AMP-STATE":{src:{allowedProtocols:{https:!0}}},"AMP-TIMEAGO":{datetime:null,title:null},"AMP-TWITTER":{"data-tweetid":null},"AMP-VIDEO":{album:null,alt:null,artist:null,artwork:null,attribution:null,controls:null,controlslist:null,loop:null,poster:null,preload:null,src:{allowedProtocols:{https:!0}},title:null},
"AMP-YOUTUBE":{"data-videoid":null},A:{href:{allowedProtocols:{ftp:!0,http:!0,https:!0,mailto:!0,"fb-messenger":!0,intent:!0,skype:!0,sms:!0,snapchat:!0,tel:!0,tg:!0,threema:!0,twitter:!0,viber:!0,whatsapp:!0}}},BUTTON:{disabled:null,type:null,value:null},DETAILS:{open:null},FIELDSET:{disabled:null},IMAGE:{"xlink:href":{allowedProtocols:{http:!0,https:!0}}},INPUT:{accept:null,accesskey:null,autocomplete:null,checked:null,disabled:null,height:null,inputmode:null,max:null,maxlength:null,min:null,minlength:null,
multiple:null,pattern:null,placeholder:null,readonly:null,required:null,selectiondirection:null,size:null,spellcheck:null,step:null,type:{blacklistedValueRegex:"(^|\\s)(button|image|)(\\s|$)"},value:null,width:null},OPTION:{disabled:null,label:null,selected:null,value:null},OPTGROUP:{disabled:null,label:null},SECTION:{"data-expand":null},SELECT:{autofocus:null,disabled:null,multiple:null,required:null,size:null},SOURCE:{src:{allowedProtocols:{https:!0}},type:null},TRACK:{label:null,src:{allowedProtocols:{https:!0}},
srclang:null},TEXTAREA:{autocomplete:null,autofocus:null,cols:null,disabled:null,maxlength:null,minlength:null,pattern:null,placeholder:null,readonly:null,required:null,rows:null,selectiondirection:null,selectionend:null,selectionstart:null,spellcheck:null,wrap:null,defaulttext:null}},Ib={src:!0,srcset:!0,href:!0,"xlink:href":!0};function Jb(a){this.ra=a}Jb.prototype.canBind=function(a,b){return void 0!==Kb(this,a,b)};
Jb.prototype.isResultValid=function(a,b,c){var d=Kb(this,a,b);d&&d.alternativeName&&(d=Kb(this,a,d.alternativeName));if(void 0===d)return!1;if(null===d)return!0;if(c&&I(Ib,b)){if("srcset"===b){try{var e=Bb(c)}catch(n){return A().error("amp-bind","Failed to parse srcset: ",n),!1}var f=e.getUrls()}else f=[c];for(a=0;a<f.length;a++){a:{var g=f[a];b=d;if(g){if(/__amp_source_origin/.test(g)){b=!1;break a}if(b=b.allowedProtocols)if(g=/^([^:\/?#.]+):[\s\S]*$/.exec(g),null!==g&&(g=g[1].toLowerCase().trim(),
!D.call(b,g))){b=!1;break a}}b=!0}if(!b)return!1}}var h=d.blacklistedValueRegex;if(c&&h){var k=new RegExp(h,"i");if(k.test(c))return!1}return!0};function Kb(a,b,c){if(J(c,"aria-"))return null;if(!I(Ib,c)||a.ra){var d=I(Fb,c);if(void 0!==d)return d;var e=I(Gb,c);if(J(b,"AMP-")&&void 0!==e)return e;var f=I(Hb,b);if(f)return f[c]}};var Lb=!1;function Mb(a){if(!Lb){Lb=!0;a=a.body;var b={opacity:1,visibility:"visible",animation:"none"},c;for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(J(g,"--"))f=g;else{qa||(qa=E());var h=qa[g];if(!h){h=g;if(void 0===f[g]){var k=g;k=k.charAt(0).toUpperCase()+k.slice(1);b:{for(var n=0;n<ra.length;n++){var z=ra[n]+k;if(void 0!==f[z]){k=z;break b}}k=""}void 0!==f[k]&&(h=k)}qa[g]=h}f=h}f&&(d.style[f]=e)}}};function T(){this.o=[]}T.prototype.peek=function(){var a=this.o.length;return a?this.o[a-1].item:null};T.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=b,d=-1,e=0,f=this.o.length;e<=f;){d=Math.floor((e+f)/2);if(d===this.o.length)break;if(this.o[d].priority<c)e=d+1;else if(0<d&&this.o[d-1].priority>=c)f=d-1;else break}this.o.splice(d,0,{item:a,priority:b})};T.prototype.forEach=function(a){for(var b=this.o.length;b--;)a(this.o[b].item)};
T.prototype.dequeue=function(){return this.o.length?this.o.pop().item:null};ja.Object.defineProperties(T.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.o.length}}});var Nb=/nochunking=1/.test(self.location.hash),Ob=Promise.resolve();function Pb(a,b){if(Nb)Ob.then(b);else{var c=Qb,d=P(a),e=Q(d);Ra(e,d,"chunk",c);S(a,"chunk").run(b,10)}}function V(a){this.state="not_run";this.Y=a}function Rb(a,b){if("run"!=a.state){a.state="run";try{a.Y(b)}catch(c){throw a.ka(),c;}}}V.prototype.P=function(){return this.Y.displayName||this.Y.name};V.prototype.ka=function(){};V.prototype.ia=function(){return!1};V.prototype.na=function(){return!1};
function W(a,b,c){V.call(this,a);this.ea=c}ha(W,V);W.prototype.ka=function(){Mb(self.document)};W.prototype.ia=function(){return this.ea.ampdoc.isVisible()};W.prototype.na=function(){return this.ea.fa};
function Qb(a){var b=this;this.ampdoc=a;this.h=a.win;this.J=new T;this.da=this.ga.bind(this);this.K=0;this.T=!1;this.sa=this.h.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.h.addEventListener("message",function(a){"amp-macro-task"==a.data&&b.ga(null)});this.fa=!1;Va(Q(a),"viewer").then(function(){b.fa=!0});a.onVisibilityChanged(function(){a.isVisible()&&Sb(b)})}Qb.prototype.run=function(a,b){var c=new V(a);this.J.enqueue(c,b);Sb(this)};
Qb.prototype.runForStartup=function(a){a=new W(a,this.h,this);this.J.enqueue(a,Number.POSITIVE_INFINITY);Sb(this)};function Tb(a,b){for(var c=a.J.peek();c&&"not_run"!==c.state;)a.J.dequeue(),c=a.J.peek();c&&b&&a.J.dequeue();return c}Qb.prototype.ga=function(a){var b=this,c=Tb(this,!0);if(!c)return this.T=!1,this.K=0,!1;try{var d=Date.now();Rb(c,a)}finally{Ob.then().then().then().then().then().then().then().then().then(function(){b.T=!1;b.K+=Date.now()-d;Sb(b)})}return!0};
function Ub(a){a.sa&&5<a.K?(a.K=0,Vb(a)):Ob.then(function(){a.da(null)})}function Sb(a){if(!a.T){var b=Tb(a);b&&(b.ia()?(a.T=!0,Ub(a)):b.na()&&a.h.requestIdleCallback?Wb(a.h,a.da):Vb(a))}}function Vb(a){a.h.postMessage("amp-macro-task","*")}function Wb(a,b){function c(f){if(f.timeRemaining()<d){var g=2E3-(Date.now()-e);0>=g||f.didTimeout?b(f):a.requestIdleCallback(c,{timeout:g})}else b(f)}var d=15,e=Date.now();a.requestIdleCallback(c,{timeout:2E3})};function Xb(){this.D=E();this.j=null}l=Xb.prototype;l.get=function(a){a=this.D[a];return null==a?null:a};l.whenSignal=function(a){var b=this.j&&this.j[a];if(!b){var c=this.D[a];null!=c?b={promise:"number"==typeof c?Promise.resolve(c):Promise.reject(c)}:(c=new ua,b={promise:c.promise,resolve:c.resolve,reject:c.reject});this.j||(this.j=E());this.j[a]=b}return b.promise};
l.signal=function(a,b){if(null==this.D[a]){var c=b||Date.now();this.D[a]=c;(a=this.j&&this.j[a])&&a.resolve&&(a.resolve(c),a.resolve=void 0,a.reject=void 0)}};l.rejectSignal=function(a,b){null==this.D[a]&&(this.D[a]=b,(a=this.j&&this.j[a])&&a.reject&&(a.reject(b),a.resolve=void 0,a.reject=void 0))};l.reset=function(a){this.D[a]&&delete this.D[a];var b=this.j&&this.j[a];b&&!b.resolve&&delete this.j[a]};function Yb(a,b){function c(){d=0;var g=5E3-(a.Date.now()-e);if(0<g)d=a.setTimeout(c,g);else{var h=f;f=null;b.apply(null,h)}}var d=0,e=0,f=null;return function(b){for(var g=[],k=0;k<arguments.length;++k)g[k-0]=arguments[k];e=a.Date.now();f=g;d||(d=a.setTimeout(c,5E3))}};function Zb(a,b,c){var d="ww",e=t().esm?".mjs":".js";if(b){var f=a.protocol+"//"+a.host;"about:"==a.protocol&&(f="");a=f+"/dist"}else a=x.cdn;return b?a+"/"+d+e:c?a+"/rtv/"+t().rtvVersion+"/"+d+e:a+"/"+d+e};function $b(a){var b=this;this.h=a;this.Ca=R(a,"xhr");var c=a.location,d=!1,e=!d,f=Zb(c,d,e);this.aa=null;this.ha=this.Ca.fetchText(f,{ampCors:!1,bypassInterceptorForDev:!1}).then(function(a){return a.text()}).then(function(c){c=new a.Blob([c+"\n//# sourceurl="+f],{type:"text/javascript"});var d=a.URL.createObjectURL(c);b.aa=new a.Worker(d);b.aa.onmessage=b.Aa.bind(b)});this.S={};this.ua=0;this.qa=[a]}
function ac(a,b,c,d){return a.ha.then(function(){return new Promise(function(e,f){var g=a.ua++;a.S[g]={method:b,resolve:e,reject:f};e=d||a.h;f=a.qa.indexOf(e);var h=0<=f?f:a.qa.push(e)-1;a.aa.postMessage({method:b,args:c,scope:h,id:g})})})}$b.prototype.Aa=function(a){var b=a.data;a=b.method;var c=b.returnValue;b=b.id;var d=this.S[b];d?(d.resolve(c),delete this.S[b]):B().error("web-worker","Received unexpected message ("+a+", "+b+") from worker.")};
$b.prototype.hasPendingMessages=function(){return 0<Object.keys(this.S).length};$b.prototype.Da=function(){return this.ha};function bc(a){var b=["\u26a14email","amp4email"],c=a.documentElement,d=b.some(function(a){return c.hasAttribute(a)});return d};function cc(){var a=1.5,b=dc(a);return function(a){return setTimeout(a,b())}}function dc(a){var b=a||2,c=0;return function(){var a=Math.pow(b,c++);var e=a*(e||.3)*Math.random();.5<Math.random()&&(e*=-1);a+=e;return 1E3*a}};var X=self.__AMP_ERRORS||[];self.__AMP_ERRORS=X;function ec(a){ec=cc();return ec(a)}function fc(a){try{return JSON.stringify(a)}catch(b){return String(a)}}var gc;
function Y(a,b){try{if(a)if(void 0!==a.message)a=oa(a);else{var c=a;a=Error(fc(c));a.origError=c}else a=Error("Unknown error");if(!a.reported){a.reported=!0;var d=b||a.associatedElement;d&&d.classList&&(d.classList.add("i-amphtml-error"),t().development&&(d.classList.add("i-amphtml-element-error"),d.setAttribute("error-message",a.message)));if(self.console){var e=console.error||console.log;a.messageArray?e.apply(console,a.messageArray):d?e.call(console,a.message,d):e.call(console,a.message)}d&&d.xa&&
d.xa("amp:error",a.message);hc.call(void 0,void 0,void 0,void 0,void 0,a)}}catch(f){setTimeout(function(){throw f;})}}function hc(a,b,c,d,e){var f=this;this&&this.document&&Mb(this.document);if(!t().development){var g=!1;try{g=ic()}catch(k){}if(!(g&&.01<Math.random())){var h=jc(a,b,c,d,e,g);h&&ec(function(){try{return kc(f,h).catch(function(){})}catch(k){}})}}}
function kc(a,b){return lc(a,b).then(function(a){if(!a){var c=new XMLHttpRequest;c.open("POST",x.errorReporting,!0);c.send(JSON.stringify(b))}})}
function lc(a,b){var c=R(a,"ampdoc");if(!c.isSingleDoc())return Promise.resolve(!1);a=c.getSingleDoc();if(!a.getRootNode().documentElement.hasAttribute("report-errors-to-viewer"))return Promise.resolve(!1);var d=S(a,"viewer");return d.hasCapability("errorReporter")?d.isTrustedViewer().then(function(a){if(!a)return!1;d.sendMessage("error",F({m:b.m,a:b.a,s:b.s,el:b.el,ex:b.ex,v:b.v,jse:b.jse}));return!0}):Promise.resolve(!1)}
function jc(a,b,c,d,e,f){var g=a;e&&(g=e.message?e.message:String(e));g||(g="Unknown error");a=g;var h=!(!e||!e.expected);if(!/_reported_/.test(a)&&"CANCELLED"!=a){var k=!(self&&self.window),n=Math.random();if(-1!=a.indexOf("Failed to load:")||"Script error."==a||k)if(h=!0,.001<n)return;var z=0<=a.indexOf("\u200b\u200b\u200b");if(!(z&&.1<n)){g=Object.create(null);g.v=t().rtvVersion;g.noAmp=f?"1":"0";g.m=a.replace("\u200b\u200b\u200b","");g.a=z?"1":"0";g.ex=h?"1":"0";g.dw=k?"1":"0";var p="1p";self.context&&
self.context.location?(g["3p"]="1",p="3p"):t().runtime&&(p=t().runtime);t().singlePassType&&(g.spt=t().singlePassType);g.rt=p;"inabox"===p&&(g.adid=t().a4aId);f=self;g.ca=f.AMP_CONFIG&&f.AMP_CONFIG.canary?"1":"0";f=self;g.bt=f.AMP_CONFIG&&f.AMP_CONFIG.type?f.AMP_CONFIG.type:"unknown";self.location.ancestorOrigins&&self.location.ancestorOrigins[0]&&(g.or=self.location.ancestorOrigins[0]);self.viewerState&&(g.vs=self.viewerState);self.parent&&self.parent!=self&&(g.iem="1");if(self.AMP&&self.AMP.viewer){var m=
self.AMP.viewer.getResolvedViewerUrl(),G=self.AMP.viewer.maybeGetMessagingOrigin();m&&(g.rvu=m);G&&(g.mso=G)}gc||(gc=mc());g.jse=gc;var U=[];f=self.__AMP__EXPERIMENT_TOGGLES||null;for(var r in f)U.push(r+"="+(f[r]?"1":"0"));g.exps=U.join(",");e?(g.el=e.associatedElement?e.associatedElement.tagName:"u",e.args&&(g.args=JSON.stringify(e.args)),z||e.ignoreStack||!e.stack||(g.s=e.stack),e.message&&(e.message+=" _reported_")):(g.f=b||"",g.l=c||"",g.c=d||"");g.r=self.document?self.document.referrer:"";g.ae=
X.join(",");g.fr=self.location.originalHash||self.location.hash;b=a;25<=X.length&&X.splice(0,X.length-25+1);X.push(b);return g}}}function ic(){var a=self;if(!a.document)return!1;a=a.document.querySelectorAll("script[src]");for(var b=0;b<a.length;b++)if(!L(a[b].src.toLowerCase()))return!0;return!1}
function mc(){function a(){}a.prototype.t=function(){throw Error("message");};var b=new a;try{b.t()}catch(d){b=d.stack;if(J(b,"t@"))return"Safari";if(-1<b.indexOf(".prototype.t@"))return"Firefox";var c=b.split("\n").pop();if(/\bat .* \(/i.test(c))return"IE";if(J(b,"Error: message"))return"Chrome"}return"unknown"};function nc(a,b,c){var d=self.location;Ha(c);var e=L(d),f=K(Fa(d));if("href"==b&&!J(c,"#"))return Ga(c,f);if("src"==b)return"amp-img"==a?oc(c,f,e):Ga(c,f);if("srcset"==b){try{var g=Bb(c)}catch(h){return A().error("URL-REWRITE","Failed to parse srcset: ",h),c}return g.stringify(function(a){return oc(a,f,e)})}return c}
function oc(a,b,c){a=K(Ga(a,b));return"data:"==a.protocol||L(a)||!c?a.href:x.cdn+"/i/"+("https:"==a.protocol?"s/":"")+encodeURIComponent(a.host)+a.pathname+(a.search||"")+(a.hash||"")};function pc(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function qc(a,b){var c=pc,d=c(a);if(d)b(a);else{var e=function(){c(a)&&(d||(d=!0,b(a)),a.removeEventListener("readystatechange",e))};a.addEventListener("readystatechange",e)}}function rc(a){return new Promise(function(b){qc(a,b)})};var sc=/^(i?-)?amp(html)?-/,tc={INPUT:{checked:!0,value:!0},OPTION:{selected:!0},TEXTAREA:{text:!0}},uc=E({"AMP-CAROUSEL":["slide"],"AMP-LIST":["state","is-layout-container"],"AMP-SELECTOR":["selected"]}),vc=["AMP-LIST"];
function wc(a,b){var c=this;this.ampdoc=a;this.h=a.win;this.H=b||a.win;this.X=[];this.ya=Yb(this.h,function(){c.X.length=0});this.G=[];this.C=E();this.Z=S(a,"history");this.la=[];this.I=1E3;this.ja=S(a,"mutator");this.w=E();this.Ba=R(this.h,"timer");this.oa=null;this.V=S(this.ampdoc,"viewer");this.V.onMessageRespond("premutate",this.za.bind(this));this.L=a.whenFirstVisible().then(function(){if(b){var c=b.document;return rc(c).then(function(){return c})}return a.whenReady().then(function(){return a.getRootNode()})}).then(function(a){return xc(c,
a)});this.ba=new ua;this.U=null;this.ma=new Xb;var d=self.AMP;d.printState=d.printState||this.wa.bind(this);d.setState=d.setState||function(a){return c.setState(a)};d.eval=d.eval||this.va.bind(this)}wc.installInEmbedWindow=function(a,b){Qa(a,new wc(b,a))};l=wc.prototype;l.signals=function(){return this.ma};
l.setState=function(a,b){var c=this;b=void 0===b?{}:b;B().info("amp-bind","setState (init=%s):",b.skipEval,a);try{pa(this.w,a)}catch(d){A().error("amp-bind","Failed to merge result from AMP.setState().",d)}return b.skipEval?Promise.resolve():this.U=this.L.then(function(){return yc(c)}).then(function(a){return zc(c,a,{skipAmpState:b.skipAmpState,constrain:b.constrain})})};
l.invoke=function(a){var b=a,c=b.args,d=b.event,e=b.method,f=b.sequenceId,g=b.tagOrTarget;if(this.X.includes(f))return A().error("amp-bind","One state action allowed per event."),Promise.resolve();this.X.push(f);this.ya();if(b=c.__AMP_OBJECT_STRING__)switch(this.I=Math.min(2E3,Math.max(1E3,this.I+500)),this.ma.signal("FIRST_MUTATE"),c={},d&&d.detail&&(c.event=d.detail),e){case "setState":return this.setStateWithExpression(b,c);case "pushState":return this.pushStateWithExpression(b,c);default:return Promise.reject(B().createError("Unrecognized method: %s.%s",
g,e))}else A().error("AMP-BIND","Please use the object-literal syntax, e.g. \"AMP.setState({foo: 'bar'})\" instead of \"AMP.setState(foo='bar')\".");return Promise.resolve()};l.setStateWithExpression=function(a,b){var c=this;return Ac(this,a,b).then(function(a){return Bc(c,a)})};l.setStateWithObject=function(a){return(a=Cc(a))?Bc(this,a):Promise.reject("Invalid state")};
function Bc(a,b){B().info("amp-bind","setState:",b);a.U=a.setState(b).then(function(){return Dc(a)}).then(function(b){b&&a.Z.replace(b)});return a.U}l.pushStateWithExpression=function(a,b){var c=this;B().info("amp-bind","pushState:",a);return Ac(this,a,b).then(function(a){function b(){return c.setState(d)}var d=E();Object.keys(a).forEach(function(a){d[a]=Cc(c.w[a])});return c.setState(a).then(function(){return Dc(c)}).then(function(a){c.Z.push(b,a)})})};
function Dc(a){var b=F({data:F({"amp-bind":a.w}),title:a.H.document.title});return a.V.isEmbedded()?a.V.isTrustedViewer().then(function(a){return a?b:null}):Promise.resolve(b)}l.rescan=function(a,b,c){var d=this;c=void 0===c?{}:c;var e=c.fast?this.ba.promise:this.L;return e.then(function(){return d.Ba.timeoutPromise(c.timeout||2E3,Ec(d,a,b,c),"Timed out waiting for amp-bind to rescan.")})};
function Ec(a,b,c,d){B().info("amp-bind","rescan: ",b,c,d);var e=d.fast?Fc(a,b,c):Gc(a,b,c);return e.then(function(){if(d.update)return yc(a).then(function(c){return zc(a,c,{constrain:b})})})}
function Fc(a,b,c){var d=Hc(a,c),e=[],f=b.filter(function(a){return a.hasAttribute("i-amphtml-binding")});b.forEach(function(a){a=a.querySelectorAll("[i-amphtml-binding]");Array.prototype.push.apply(f,a)});var g=a.I-a.numberOfBindings();for(b=0;b<f.length&&!Ic(a,f[b],g-e.length,e);b++);d.then(function(b){B().info("amp-bind","rescan.fast: delta=%s, total=%s",e.length-b,a.numberOfBindings())});return 0<e.length?Jc(a,e):Promise.resolve()}
l.getState=function(a){a=a?ib(this.w,a):void 0;return v(a)||Array.isArray(a)?Cc(a):a};l.getStateValue=function(a){a=ib(this.w,a);return void 0===a||null===a?null:v(a)||Array.isArray(a)?JSON.stringify(a):String(a)};
function xc(a,b){var c=!bc(a.H.document);a.oa=new Jb(c);return Z(a,"bind.init",[c]).then(function(){return Promise.all([Kc(a).then(function(){return a.ba.resolve()}),Lc(a,[b])])}).then(function(){b.addEventListener("amp:dom-update",function(b){return Mc(a,b)})}).then(function(){var a=b.querySelectorAll("AMP-STATE"),c=!1,f=u(a).map(function(a){return db(a).then(function(){return a.getImpl(c)}).then(function(a){return a.parseAndUpdate()})});return Promise.all(f)}).then(function(){a.V.sendMessage("bindReady",
void 0);if(t().development)return yc(a).then(function(b){return Nc(a,b)})})}l.numberOfBindings=function(){return this.G.reduce(function(a,b){return a+b.boundProperties.length},0)};l.Ga=function(a){this.I=a};l.Ea=function(){return this.Z};
l.za=function(a){var b=this,c=[];return this.L.then(function(){Object.keys(a.state).forEach(function(d){b.la.includes(d)||(delete a.state[d],c.push(d))});0<c.length&&A().warn("amp-bind","Some state keys could not be premutated because they are missing the overridable attribute: "+c.join(", "));return b.setState(a.state)})};l.addOverridableKey=function(a){this.la.push(a)};
function Kc(a){var b=a.ampdoc.getBody().querySelectorAll("AMP-BIND-MACRO"),c=[];bb(b,function(a){var b=(a.getAttribute("arguments")||"").split(",").map(function(a){return a.trim()});c.push({id:a.getAttribute("id"),argumentNames:b,expressionString:a.getAttribute("expression")})});return 0==c.length?Promise.resolve(0):Z(a,"bind.addMacros",[c]).then(function(a){a.forEach(function(a,c){Oc(a,"amp-bind: Parsing amp-bind-macro failed.",b[c])});return c.length})}
function Lc(a,b){if(!b.length)return Promise.resolve(0);var c=b.map(function(b){var c=a.I-a.numberOfBindings();return Pc(a,b,c).then(function(b){var c=b.bindings,d=b.limitExceeded;d&&B().expectedError("amp-bind","Maximum number of bindings reached (%s). Additional elements with bindings will be ignored.",a.I);return c})});return Promise.all(c).then(function(b){b=Array.prototype.concat.apply([],b);return 0<b.length?Jc(a,b):0})}
function Jc(a,b){return Z(a,"bind.addBindings",[b]).then(function(c){Object.keys(c).forEach(function(b){var d=a.C[b];0<d.length&&Oc(c[b],'amp-bind: Expression compile error in "'+b+'".',d[0])});return b.length})}
function Hc(a,b){if(!b.length)return Promise.resolve(0);ob(a.G,function(a){for(var c=0;c<b.length;c++)if(b[c].contains(a.element))return!0;return!1});var c=[],d;for(d in a.C){var e=a.C[d];ob(e,function(a){for(var c=0;c<b.length;c++)if(b[c].contains(a))return!0;return!1});0==e.length&&(c.push(d),delete a.C[d])}var f=c.length;return 0<f?Z(a,"bind.removeBindingsWithExpressionStrings",[c]).then(function(){return f}):Promise.resolve(0)}
function Pc(a,b,c){function d(){var b=f.currentNode;if(!b)return!0;if(b.nodeType!==Node.ELEMENT_NODE)return!f.nextNode();var d=c-e.length;Ic(a,b,d,e)&&(g=!0);if(vc.includes(b.nodeName))a:{b=f;for(var n=b.currentNode;n;n=b.parentNode())if(n=b.nextSibling()){b=n;break a}b=null}else b=f.nextNode();var z=b;return!z||g}var e=[],f=(b.nodeType==Node.DOCUMENT_NODE?b:b.ownerDocument).createTreeWalker(b,NodeFilter.SHOW_ELEMENT,null,!1),g=!1;return new Promise(function(b){function c(f){var h=!1;if(f&&!f.didTimeout)for(;1<
f.timeRemaining()&&!h;)h=d();else{var k=250;for(f=0;f<k&&!h;f++)h=d()}h?b({bindings:e,limitExceeded:g}):Pb(a.ampdoc,c)}Pb(a.ampdoc,c)})}function Ic(a,b,c,d){var e=!1,f=Qc(a,b);f.length>c&&(f.length=c,e=!0);0<f.length&&a.G.push({element:b,boundProperties:f});var g=b.tagName;f.forEach(function(c){var e=c,f=e.expressionString;d.push({tagName:g,property:e.property,expressionString:f});a.C[f]||(a.C[f]=[]);a.C[f].push(b)});return e}
function Qc(a,b){for(var c=[],d=b.attributes,e=0,f=d.length;e<f;e++){a:{var g=void 0,h=a,k=d[e];var n=b;var z=n.tagName,p=k.name;if(2<p.length&&"["===p[0]&&"]"===p[p.length-1])g=p.substr(1,p.length-2);else if(J(p,"data-amp-bind-")&&(g=p.substr(14),n.hasAttribute("["+g+"]"))){n=null;break a}if(g){if(h.oa.canBind(z,g)){n={property:g,expressionString:k.value};break a}g=A().createError("%s: Binding to [%s] on <%s> is not allowed.","amp-bind",g,z);Y(g,n)}n=null}n&&c.push(n)}return c}
function Ac(a,b,c){return a.L.then(function(){Object.assign(c,a.w);return Z(a,"bind.evaluateExpression",[b,c])}).then(function(a){var b=a.result;if(a=a.error)throw Oc(a,"amp-bind: Expression eval failed.");return b})}
function yc(a){var b=Z(a,"bind.evaluateBindings",[a.w]);return b.then(function(b){var c=b.results,e=b.errors;Object.keys(e).forEach(function(b){var c=a.C[b];if(0<c.length){var d=e[b],f=A().createError('%s: Expression evaluation error in "%s". %s',"amp-bind",b,d.message);f.stack=d.stack;Y(f,c[0])}});B().info("amp-bind","evaluation:",c);return c})}
function Nc(a,b){var c=void 0===c?null:c;var d=void 0===d?!0:d;var e={};a.G.forEach(function(a){var f=a.element;a=a.boundProperties;c&&!Rc(c,f)||a.forEach(function(a){var c=b[a.expressionString];if(void 0!==c){var g=a.property,h=uc[f.tagName];if(h&&h.includes(g))c=null;else{switch(g){case "text":g=f.textContent;c=String(c);h=g.trim()===c.trim();break;case "class":g=[];for(h=0;h<f.classList.length;h++){var p=f.classList[h];sc.test(p)||g.push(p)}p=[];Array.isArray(c)?p=c:"string"===typeof c?(h=c.trim(),
0<h.length&&(p=h.split(" "))):(h=A().createError('%s: "%s" is not a valid result for [class].',"amp-bind",c),Y(h,f));b:{h=g;var m=p;if(h.length!==m.length)h=!1;else{p=(Array.isArray(h)?h:u(h)).sort();m=(Array.isArray(m)?m:u(m)).sort();for(var G=0;G<h.length;G++)if(p[G]!==m[G]){h=!1;break b}h=!0}}break;default:g=f.getAttribute(g),h=!0===c?""===g:!1===c?null===g:"number"===typeof c?Number(g)===c:g===c}c=h?null:{expected:c,actual:g}}var U=c;if(U){c=f.tagName;g=a.property;a=a.expressionString;h=U;p=h.expected;
var r=h.actual;e[c+"["+g+"]"+p+":"+r]=!0;d&&A().warn("amp-bind","Default value ("+r+") does not match first result ("+(p+") for <"+c+" ["+g+']="')+(a+'">. We recommend writing expressions with matching default values, but this can be safely ignored if intentional.'))}}})});return Object.keys(e)}function Rc(a,b){for(var c=0;c<a.length;c++)if(a[c].contains(b))return!0;return!1}
function Sc(a,b){var c=[];a.forEach(function(a){var d=a.previousResult,f=b[a.expressionString];void 0===f||kb(f,d)||(a.previousResult=f,c.push({boundProperty:a,newValue:f}))});return c}function zc(a,b,c){var d=[];a.G.forEach(function(e){c.skipAmpState&&"AMP-STATE"===e.element.tagName||(!c.constrain||c.constrain.some(function(a){return a.contains(e.element)}))&&d.push(Tc(a,b,e))});return Promise.all(d)}
function Tc(a,b,c){var d=c.element,e=Sc(c.boundProperties,b);return 0===e.length?Promise.resolve():a.ja.mutateElement(d,function(){var b=E(),c,h;e.forEach(function(e){var f=e,g=f.boundProperty,m=f.newValue;f=g.property;a:{g=g.property;var k=d.tagName;switch(g){case "defaulttext":d.textContent=String(m);break;case "text":g=String(m);"TITLE"===k&&d.parentNode===a.H.document.head&&(a.H.document.title=g);"TEXTAREA"===k?d.value=g:d.textContent=g;break;case "class":g=[];for(var n=0;n<d.classList.length;n++){var r=
d.classList[n];sc.test(r)&&g.push(r)}Array.isArray(m)||"string"===typeof m?d.setAttribute("class",g.concat(m).join(" ")):null===m?d.setAttribute("class",g.join(" ")):(g=A().createError('%s: "%s" is not a valid result for [class].',"amp-bind",m),Y(g,d));break;default:var sb="INPUT"===k&&g in d,H=d.getAttribute(g);k=!1;if("boolean"===typeof m){if(sb&&d[g]!==m&&(d[g]=m,k=!0),m&&""!==H?(d.setAttribute(g,""),k=!0):m||null===H||(d.removeAttribute(g),k=!0),k&&"OPTION"===d.tagName&&"selected"===g&&m&&R(a.h,
"platform").isSafari()&&(n=ab(d,"select")))r=u(n.options).indexOf(d),0<=r&&(n.selectedIndex=r)}else if("object"===typeof m&&null!==m)k=!0;else if(m!==H)b:{H=String(m);try{n=d.tagName.toLowerCase();r=g.toLowerCase();var Ia="src"==r||"href"==r||"xlink:href"==r||"srcset"==r?nc(n,r,H):H;if(L(self.location)&&"a"===n&&"href"===r){var tb=d.getAttribute(r),ub="#"===Ia[0],vb=tb&&"#"===tb[0];ub&&!vb?(d.__AMP_ORIGINAL_TARGET_VALUE_||(d.__AMP_ORIGINAL_TARGET_VALUE_=d.getAttribute("target")),d.removeAttribute("target")):
vb&&!ub&&d.setAttribute("target",d.__AMP_ORIGINAL_TARGET_VALUE_||"_top")}sb&&(d[r]=Ia);d.setAttribute(r,Ia);k=!0;break b}catch(Uc){n=A().createError('%s: "%s" is not a valid result for [%]',"amp-bind",H,g,Uc),Y(n,d)}k=!1}if(k){g={name:g,value:m};break a}}g=null}var Ja=g;Ja&&(b[Ja.name]=Ja.value,"width"==f?c="number"===typeof m&&isFinite(m)?Number(m):c:"height"==f&&(h="number"===typeof m&&isFinite(m)?Number(m):h));(m=tc[d.tagName])&&m[f]&&(f="OPTION"===d.tagName?ab(d,"SELECT"):d)&&(m=nb(a.H,"amp:form-value-change",
null,{bubbles:!0}),f.dispatchEvent(m))});void 0===c&&void 0===h||a.ja.changeSize(d,h,c);if("function"===typeof d.mutatedAttributesCallback)try{d.mutatedAttributesCallback(b)}catch(n){var k=A().createError("%s: Applying expression results (%s) failed with error,","amp-bind",JSON.stringify(b),n);Y(k,d)}})}function Mc(a,b){b=b.target;var c=b.parentNode;c&&vc.includes(c.nodeName)||(B().info("amp-bind","dom_update:",b),Gc(a,[b],[b],"dom_update.end").then(function(){}))}
function Gc(a,b,c,d){d=void 0===d?"rescan.slow":d;var e=0;return Hc(a,c).then(function(c){e=c;return Lc(a,b)}).then(function(b){B().info("amp-bind","%s: delta=%s, total=%s",d,b-e,a.numberOfBindings())})}function Z(a,b,c){var d=a.h;a=a.H;if(d.Worker){var e=N(d);Ra(e,e,"amp-worker",$b);d=R(d,"amp-worker");b=ac(d,b,c||[],a)}else b=Promise.reject("Worker not supported in window.");return b}function Oc(a,b,c){b=A().createError("%s %s",b,a.message);b.stack=a.stack;Y(b,c);return b}
function Cc(a){if(void 0===a)return null;try{return JSON.parse(JSON.stringify(a))}catch(b){B().error("amp-bind","Failed to copy JSON ("+a+") with error: "+b)}return null}
l.wa=function(a){if(a)if("string"==typeof a){var b=ib(this.w,a);A().info("amp-bind",b)}else a.nodeType==Node.ELEMENT_NODE?(b=A().assertElement(a),Vc(this,b)):A().info("amp-bind",'Invalid argument. Pass a JSON expression or an element instead e.g. AMP.printState("foo.bar") or AMP.printState($0) after selecting an element.');else A().info("amp-bind",this.w)};
function Vc(a,b){var c=pb(a.G,function(a){return a.element==b});if(0>c)A().info("amp-bind","Element has no bindings:",b);else{var d=[],e=a.G[c].boundProperties;e.forEach(function(b){d.push(Ac(a,b.expressionString,a.w))});Promise.all(d).then(function(a){var b=E();e.forEach(function(c,d){b[c.property]=a[d]});A().info("amp-bind",b)})}}l.va=function(a){Ac(this,a,this.w).then(function(a){A().info("amp-bind",a)})};l.Fa=function(){return this.L};l.Ha=function(){return this.U};(function(a){a.registerServiceForDoc("bind",wc);a.registerElement("amp-state",rb);a.registerElement("amp-bind-macro",ta)})(self.AMP);
})});

//# sourceMappingURL=amp-bind-0.1.js.map
