(self.AMP=self.AMP||[]).push({n:"amp-audio",v:"2002251816300",f:(function(AMP,_){
var h,l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var p={a:!0},q={};try{q.__proto__=p;n=q.a;break a}catch(a){}n=!1}m=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var r=m;function t(){var a,b;this.promise=new Promise(function(e,f){a=e;b=f});this.resolve=a;this.reject=b};function u(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(e){return b}};var aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var ba=Object.prototype.toString;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var v=self.__AMP_LOG;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function x(){if(v.dev)return v.dev;throw Error("failed to call initLogConstructor");}function y(a,b,e,f,c){w().assert(a,b,e,f,c,void 0,void 0,void 0,void 0,void 0,void 0)};var z=Object.prototype.hasOwnProperty;function A(){var a=100;this.w=a;this.l=this.m=0;this.j=Object.create(null)}A.prototype.has=function(a){return!!this.j[a]};A.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.l,b.payload};A.prototype.put=function(a,b){this.has(a)||this.m++;this.j[a]={payload:b,access:this.l};if(!(this.m<=this.w)){x().warn("lru-cache","Trimming LRU cache");a=this.j;var e=this.l+1,f;for(f in a){var c=a[f].access;if(c<e){e=c;var d=f}}void 0!==d&&(delete a[d],this.m--)}};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});var B,C;
function D(a,b){var e=void 0===e?"source":e;y(null!=a,"%s %s must be available",b,e);var f=a;a=f;if("string"==typeof a){B||(B=self.document.createElement("a"),C=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new A));var c=C,d=B;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var g={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==g.pathname[0]&&(g.pathname="/"+g.pathname);
if("http:"==g.protocol&&80==g.port||"https:"==g.protocol&&443==g.port)g.port="",g.host=g.hostname;g.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=g.protocol&&g.host?g.protocol+"//"+g.host:g.href;c&&c.put(a,g);a=g}}(c="https:"==a.protocol||"localhost"==a.hostname||"127.0.0.1"==a.hostname)||(a=a.hostname,c=a.length-10,c=0<=c&&a.indexOf(".localhost",c)==c);y(c||/^(\/\/)/.test(f),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',
b,e,f)};function E(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var e=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);e=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var f in a.AMP_CONFIG){var c=a.AMP_CONFIG[f];"number"===typeof c&&0<=c&&1>=c&&(e[f]=Math.random()<c)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(f=a.AMP_CONFIG["allow-doc-opt-in"],c=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){c=
c.getAttribute("content").split(",");for(var d=0;d<c.length;d++)-1!=f.indexOf(c[d])&&(e[c[d]]=!0)}Object.assign(e,ca(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){f=a.AMP_CONFIG["allow-url-opt-in"];c=a.location.originalHash||a.location.hash;a=Object.create(null);if(c)for(var g;g=aa.exec(c);)d=u(g[1],g[1]),g=g[2]?u(g[2].replace(/\+/g," "),g[2]):"",a[d]=g;for(c=0;c<f.length;c++)d=a["e-"+f[c]],"1"==d&&(e[f[c]]=!0),"0"==d&&(e[f[c]]=!1)}}var k=
e;return!!k[b]}function ca(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(c){x().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var e=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var f=0;f<e.length;f++)0!=e[f].length&&("-"==e[f][0]?a[e[f].substr(1)]=!1:a[e[f]]=!0);return a};var F={},G=(F["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},F);function da(a){var b=a.ownerDocument.defaultView,e=b.__AMP_TOP||(b.__AMP_TOP=b),f=b!=e;var c=e;if(E(c,"ampdoc-fie")){c.__AMP_EXPERIMENT_BRANCHES=c.__AMP_EXPERIMENT_BRANCHES||{};for(var d in G)if(z.call(G,d)&&!z.call(c.__AMP_EXPERIMENT_BRANCHES,d))if(G[d].isTrafficEligible&&G[d].isTrafficEligible(c)){if(!c.__AMP_EXPERIMENT_BRANCHES[d]&&E(c,d)){var g=G[d].branches;c.__AMP_EXPERIMENT_BRANCHES[d]=g[Math.floor(Math.random()*g.length)]||null}}else c.__AMP_EXPERIMENT_BRANCHES[d]=null;c="21065002"===(c.__AMP_EXPERIMENT_BRANCHES?
c.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else c=!1;var k=c;f&&!k?a=H(b,"url")?I(b,"url"):null:(a=J(a),a=K(a),a=H(a,"url")?I(a,"url"):null);return a}function L(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return I(a,b)}function J(a){return a.nodeType?L((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a){a=J(a);return a.isSingleDoc()?a.win:a}
function I(a,b){H(a,b);var e=M(a);a=e[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function N(a){var b=M(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;I(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function M(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function H(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
function ea(){var a=new t,b=a,e=b.promise,f=b.resolve;b=b.reject;e.catch(function(){});return{obj:null,promise:e,resolve:f,reject:b,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function fa(a,b){for(var e;a&&a!==e;a=a.parentElement)if(b(a))return a;return null}function ha(a){return a.closest?a.closest("AMP-STORY"):fa(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"AMP-STORY"):!1})};function ia(a){var b=N(K(a));if(b)return b;var e=J(a);return e.waitForBodyOpen().then(function(){var a=e.win;var b=e.win.document.head;if(b){var d={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var k=b[g];k=k.getAttribute("custom-element")||k.getAttribute("custom-template");d[k]=!0}d=Object.keys(d)}else d=[];a=d.includes("amp-analytics")?L(a,"extensions").waitForExtension(a,"amp-analytics"):Promise.resolve();return a}).then(function(){var b=e.win;
if(b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]){b=K(a);var c=N(b);c?b=c:(b=M(b),b["amp-analytics-instrumentation"]=ea(),b=b["amp-analytics-instrumentation"].promise)}else b=null;return b})};var O={title:"",artist:"",album:"",artwork:[{src:""}]};function ja(a,b,e,f,c){var d=b.navigator;"mediaSession"in d&&b.MediaMetadata&&(d.mediaSession.metadata=new b.MediaMetadata(O),ka(a,e),d.mediaSession.metadata=new b.MediaMetadata(e),d.mediaSession.setActionHandler("play",f),d.mediaSession.setActionHandler("pause",c))}
function la(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){try{var e=JSON.parse(b.textContent)}catch(c){e=null}var f=e;if(f&&f.image){if("string"===typeof f.image)return f.image;if(f.image["@list"]&&"string"===typeof f.image["@list"][0])return f.image["@list"][0];if("string"===typeof f.image.url)return f.image.url;if("string"===typeof f.image[0])return f.image[0]}}}
function ka(a,b){var e=da(a);if(b&&b.artwork){var f=b.artwork;Array.isArray(f);f.forEach(function(a){a&&(a="[object Object]"===ba.call(a)?a.src:a,y(e.isProtocolValid(a)))})}};var P;function ma(a,b,e){var f=void 0,c=a,d=e;var g=function(a){try{return d(a)}catch(R){throw self.__AMP_REPORT_ERROR(R),R;}};var k=na(),S=!1;f&&(S=f.capture);c.addEventListener(b,g,k?f:S)}function na(){if(void 0!==P)return P;P=!1;try{var a={get capture(){P=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return P};function Q(a,b,e){ma(a,b,e)};function T(a,b){var e;ia(a).then(function(f){f&&f.triggerEventForTarget(a,b,e)})};function U(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.o=O;a.isPlaying=!1;return a}var V=AMP.BaseElement;U.prototype=l(V.prototype);U.prototype.constructor=U;if(r)r(U,V);else for(var W in V)if("prototype"!=W)if(Object.defineProperties){var X=Object.getOwnPropertyDescriptor(V,W);X&&Object.defineProperty(U,W,X)}else U[W]=V[W];U.C=V.prototype;h=U.prototype;h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};
h.buildCallback=function(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.registerAction("play",this.B.bind(this));this.registerAction("pause",this.A.bind(this))};
h.mutatedAttributesCallback=function(a){if(this.h){var b=a.src,e=a.controlsList,f=a.loop;if(void 0!==b||void 0!==e||void 0!==f)void 0!==b&&D(b,this.element),this.propagateAttributes(["src","loop","controlsList"],this.h);var c=a.artist;b=a.title;var d=a.album,g=a.artwork;void 0===c&&void 0===b&&void 0===d&&void 0===g||Y(this)}};
h.buildAudioElement=function(){var a=this,b=this.element.ownerDocument.createElement("audio");if(!b.play)return this.toggleFallback(!0),Promise.resolve();b.controls=!0;var e=this.element.getAttribute("src");e&&D(e,this.element);this.propagateAttributes("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),b);this.applyFillContent(b);this.getRealChildNodes().forEach(function(a){a.getAttribute&&a.getAttribute("src")&&D(a.getAttribute("src"),a);b.appendChild(a)});
this.element.appendChild(b);this.h=b;Q(this.h,"playing",function(){return oa(a)});Q(this.h,"play",function(){return T(a.element,"audio-play")});Q(this.h,"pause",function(){return T(a.element,"audio-pause")})};h.layoutCallback=function(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();Y(this);return"none"===this.element.getAttribute("preload")?this.h:this.loadPromise(this.h)};
function Y(a){var b=a.getAmpDoc().win.document,e=a.element.getAttribute("artist")||"",f=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",c=a.element.getAttribute("album")||"",d;(d=a.element.getAttribute("artwork")||la(b))||(d=(d=b.querySelector('meta[property="og:image"]'))?d.getAttribute("content"):void 0);d||(d=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.o={title:f,artist:e,album:c,artwork:[{src:d||
""}]}}h.renderOutsideViewport=function(){return!0};h.pauseCallback=function(){this.h&&this.h.pause()};function Z(a){return a.h?ha(a.element)?(w().warn("amp-audio","<amp-story> elements do not support actions on <amp-audio> elements"),!1):!0:!1}h.A=function(){Z(this)&&this.h.pause()};h.B=function(){Z(this)&&this.h.play()};function oa(a){ja(a.element,a.win,a.o,function(){a.h.play()},function(){a.h.pause()})}(function(a){a.registerElement("amp-audio",U)})(self.AMP);
})});

//# sourceMappingURL=amp-audio-0.1.js.map
